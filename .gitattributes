import requests
import json

user_counter = 0

info = dict()
info["A"] = []
info["B"] = []

def appenddata(d):
    if user_counter == 0:
        info["A"].append(d)

    else:
        info["B"].append(d)

while user_counter <=1:
    id = input("please enter your id").strip()   #輸入id
    access_token = input("please enter your access token") .strip()  #輸入access token 取得token 時須取得name hometown likes posts之權限
    url_model = "https://graph.facebook.com/v2.9/iidd?fields=xxxxx&access_token=" + access_token  #網址模板
    url = url_model.replace("iidd", id)   #網址
    fields = ["name","hometown", "posts","likes"]

    for f in fields:
        initial_url = url.replace("xxxxx", f)
        response = requests.get(initial_url)
        if f == "name" or f == "hometown":
            html = json.loads(response.text)
            if f in html:#print(html[f])
                appenddata(html[f])
            else:
                appenddata("None")

        else:
            html = json.loads(response.text)
            page_counter = 0
            #print(html[f]["data"])
            appenddata(html[f]["data"])

            while True:
                if page_counter < 1:
                    sub_url = html[f]["paging"]["next"]
                    response = requests.get(sub_url)
                    html = json.loads(response.text)
                    page_counter += 1

                    #if f in html:
                    if "next" in html :
                        #print(html["data"])
                        appenddata(html["data"])

                    else:
                        break

                    #else:
                        #appenddata("None")

                elif page_counter >= 1:
                    sub_url = html["paging"]["next"]
                    response = requests.get(sub_url)
                    html = json.loads(response.text)
                    page_counter += 1

                    #if f in html:
                    if "next" in html:
                        #print(html["data"])
                        appenddata(html["data"])

                    else:
                        break

                    #else:
                        #appenddata("None")

    user_counter += 1
print("____________________________________________________________________________________________________________")
for i in range(4):
    if i == 3:
        for t in range(len(info["A"][3])) :
            print(info["A"][3][t]["name"], info["B"][3][t]["created_time"])

    elif i == 2:
        for t in range(len(info["A"][2])):
            if "message" in info["A"][2][t]:
                print(info["A"][2][t]["message"], info["B"][2][t]["created_time"])

    else:
        print(info["A"][i])


print("____________________________________________________________________________________________________________")

for i in range(4):
    if i == 3:
        for t in range(len(info["B"][3])):
            print(info["B"][3][t]["name"], info["B"][3][t]["created_time"])

    elif i == 2:
        for t in range(len(info["B"][2])):
            if "message" in info["B"][2][t]:
                print(info["B"][2][t]["message"], info["B"][2][t]["created_time"])


    else:
        print(info["B"][i])

print("______________________________________________________________________________________________________________")

print(info)
